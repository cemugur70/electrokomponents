<!-- Register Page -->
<div class="auth-wrapper">
    <!-- Sol Panel - Görsel -->
    <div class="auth-visual">
        <div class="auth-visual-content">
            <div class="auth-logo">
                <span class="logo-icon"><i class="fas fa-microchip"></i></span>
                <span class="logo-text">Electro<strong>Komponents</strong></span>
            </div>
            <h1>Aramıza Katılın</h1>
            <p>Ücretsiz hesap oluşturarak binlerce elektronik komponente erişin, özel fiyatlardan yararlanın.</p>
            <div class="auth-features">
                <div class="auth-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>Kurumsal Üyelere Özel İndirimler</span>
                </div>
                <div class="auth-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>Sipariş Takibi ve Geçmiş</span>
                </div>
                <div class="auth-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>Favori Listesi Oluşturma</span>
                </div>
                <div class="auth-feature">
                    <i class="fas fa-check-circle"></i>
                    <span>Stok Bildirimi Alma</span>
                </div>
            </div>
        </div>
        <div class="auth-visual-overlay"></div>
    </div>

    <!-- Sağ Panel - Form -->
    <div class="auth-form-panel">
        <div class="auth-form-content">
            <div class="auth-header">
                <h2>Kayıt Ol</h2>
                <p>Yeni hesap oluşturun ve alışverişe başlayın.</p>
            </div>

            <!-- Üyelik Tipi Seçimi -->
            <div class="membership-tabs">
                <button class="membership-tab active" data-type="bireysel">
                    <i class="fas fa-user"></i>
                    Bireysel Üyelik
                </button>
                <button class="membership-tab" data-type="kurumsal">
                    <i class="fas fa-building"></i>
                    Kurumsal Üyelik
                </button>
            </div>

            <!-- Hata Mesajları -->
            <% if (typeof errors !=='undefined' && errors.length> 0) { %>
                <div class="auth-alert error">
                    <i class="fas fa-exclamation-circle"></i>
                    <ul>
                        <% errors.forEach(error=> { %>
                            <li>
                                <%= error.msg %>
                            </li>
                            <% }) %>
                    </ul>
                </div>
                <% } %>

                    <% if (typeof error_msg !=='undefined' && error_msg) { %>
                        <div class="auth-alert error">
                            <i class="fas fa-exclamation-circle"></i>
                            <span>
                                <%= error_msg %>
                            </span>
                        </div>
                        <% } %>

                            <form action="/auth/kayit" method="POST" class="auth-form" id="registerForm">
                                <input type="hidden" name="uyelik_tipi" id="uyelikTipi" value="bireysel">

                                <!-- Bireysel / Ortak Alanlar -->
                                <div class="form-row-2">
                                    <div class="form-group">
                                        <label for="ad">Ad *</label>
                                        <div class="input-group">
                                            <span class="input-icon"><i class="fas fa-user"></i></span>
                                            <input type="text" id="ad" name="ad" placeholder="Adınız"
                                                value="<%= typeof formData !== 'undefined' ? formData.ad : '' %>"
                                                required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="soyad">Soyad *</label>
                                        <div class="input-group">
                                            <span class="input-icon"><i class="fas fa-user"></i></span>
                                            <input type="text" id="soyad" name="soyad" placeholder="Soyadınız"
                                                value="<%= typeof formData !== 'undefined' ? formData.soyad : '' %>"
                                                required>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="email">E-posta Adresi *</label>
                                    <div class="input-group">
                                        <span class="input-icon"><i class="fas fa-envelope"></i></span>
                                        <input type="email" id="email" name="email" placeholder="ornek@email.com"
                                            value="<%= typeof formData !== 'undefined' ? formData.email : '' %>"
                                            required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="telefon">Telefon</label>
                                    <div class="input-group">
                                        <span class="input-icon"><i class="fas fa-phone"></i></span>
                                        <input type="tel" id="telefon" name="telefon" placeholder="05XX XXX XX XX"
                                            value="<%= typeof formData !== 'undefined' ? formData.telefon : '' %>">
                                    </div>
                                </div>

                                <!-- Kurumsal Alanlar -->
                                <div class="corporate-fields" id="corporateFields" style="display: none;">
                                    <div class="form-group">
                                        <label for="firma_adi">Firma Adı *</label>
                                        <div class="input-group">
                                            <span class="input-icon"><i class="fas fa-building"></i></span>
                                            <input type="text" id="firma_adi" name="firma_adi" placeholder="Firma Adı"
                                                value="<%= typeof formData !== 'undefined' ? formData.firma_adi : '' %>">
                                        </div>
                                    </div>

                                    <div class="form-row-2">
                                        <div class="form-group">
                                            <label for="vergi_no">Vergi No *</label>
                                            <div class="input-group">
                                                <span class="input-icon"><i class="fas fa-file-invoice"></i></span>
                                                <input type="text" id="vergi_no" name="vergi_no"
                                                    placeholder="Vergi Numarası"
                                                    value="<%= typeof formData !== 'undefined' ? formData.vergi_no : '' %>">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="vergi_dairesi">Vergi Dairesi *</label>
                                            <div class="input-group">
                                                <span class="input-icon"><i class="fas fa-landmark"></i></span>
                                                <input type="text" id="vergi_dairesi" name="vergi_dairesi"
                                                    placeholder="Vergi Dairesi"
                                                    value="<%= typeof formData !== 'undefined' ? formData.vergi_dairesi : '' %>">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-row-2">
                                    <div class="form-group">
                                        <label for="sifre">Şifre *</label>
                                        <div class="input-group">
                                            <span class="input-icon"><i class="fas fa-lock"></i></span>
                                            <input type="password" id="sifre" name="sifre"
                                                placeholder="En az 6 karakter" required minlength="6">
                                            <button type="button" class="toggle-password" data-target="sifre">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="sifre_tekrar">Şifre Tekrar *</label>
                                        <div class="input-group">
                                            <span class="input-icon"><i class="fas fa-lock"></i></span>
                                            <input type="password" id="sifre_tekrar" name="sifre_tekrar"
                                                placeholder="Şifreyi tekrar girin" required>
                                        </div>
                                    </div>
                                </div>

                                <!-- Onay Kutuları -->
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="kvkk" required>
                                        <span class="checkmark"></span>
                                        <a href="/kvkk" target="_blank">KVKK Aydınlatma Metni</a>'ni okudum ve kabul
                                        ediyorum. *
                                    </label>
                                </div>

                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="email_izni">
                                        <span class="checkmark"></span>
                                        Kampanya ve yeniliklerden e-posta ile haberdar olmak istiyorum.
                                    </label>
                                </div>

                                <button type="submit" class="btn btn-primary btn-block btn-lg">
                                    Kayıt Ol
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </form>

                            <div class="auth-footer">
                                <p>Zaten hesabınız var mı? <a href="/auth/giris">Giriş Yap</a></p>
                            </div>

                            <div class="security-note">
                                <i class="fas fa-shield-alt"></i>
                                <span>256-bit SSL ile güvenli bağlantı</span>
                            </div>
        </div>
    </div>
</div>

<style>
    /* Additional Register Page Styles */
    .membership-tabs {
        display: flex;
        gap: 12px;
        margin-bottom: 24px;
    }

    .membership-tab {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 14px;
        background: var(--bg-input);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        color: var(--text-secondary);
        font-weight: 500;
        transition: all var(--transition-normal);
    }

    .membership-tab:hover {
        border-color: var(--color-primary);
        color: var(--color-primary);
    }

    .membership-tab.active {
        background: rgba(59, 130, 246, 0.1);
        border-color: var(--color-primary);
        color: var(--color-primary);
    }

    .form-row-2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
    }

    .corporate-fields {
        display: flex;
        flex-direction: column;
        gap: 20px;
        padding-top: 10px;
        border-top: 1px solid var(--border-color);
        margin-top: 10px;
    }

    .checkbox-label a {
        color: var(--color-primary);
    }

    .checkbox-label a:hover {
        text-decoration: underline;
    }

    @media (max-width: 480px) {
        .form-row-2 {
            grid-template-columns: 1fr;
        }

        .membership-tabs {
            flex-direction: column;
        }
    }
</style>

<script>
    // Toggle Password Visibility
    document.querySelectorAll('.toggle-password').forEach(btn => {
        btn.addEventListener('click', function () {
            const targetId = this.dataset.target;
            const input = document.getElementById(targetId);
            const icon = this.querySelector('i');

            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });
    });

    // Membership Type Toggle
    document.querySelectorAll('.membership-tab').forEach(tab => {
        tab.addEventListener('click', function () {
            document.querySelectorAll('.membership-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            const type = this.dataset.type;
            document.getElementById('uyelikTipi').value = type;

            const corporateFields = document.getElementById('corporateFields');
            if (type === 'kurumsal') {
                corporateFields.style.display = 'flex';
                corporateFields.querySelectorAll('input').forEach(input => {
                    input.required = true;
                });
            } else {
                corporateFields.style.display = 'none';
                corporateFields.querySelectorAll('input').forEach(input => {
                    input.required = false;
                });
            }
        });
    });

    // Password Match Validation
    document.getElementById('sifre_tekrar').addEventListener('input', function () {
        const sifre = document.getElementById('sifre').value;
        if (this.value !== sifre) {
            this.setCustomValidity('Şifreler eşleşmiyor');
        } else {
            this.setCustomValidity('');
        }
    });
</script>